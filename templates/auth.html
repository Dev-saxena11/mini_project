<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Register - Travel Together</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="auth-page">

    <a href="/home" class="back-link-auth">← Back to Home</a>

    <div class="auth-container">
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul class="flash-messages">
              {% for message in messages %}
                <li>{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    
        <div class="auth-form-panel" id="login-form">
            <h2>Welcome Back</h2>
            <form method="POST">
                <input type="hidden" name="action" value="login">
                <input type="text" name="username" placeholder="Username" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <p class="toggle-link">Don’t have an account? <span onclick="toggleForms()">Register</span></p>
        </div>

        <div class="auth-form-panel hidden" id="register-form">
            <h2>Join the Adventure</h2>
            <form method="POST">
                <input type="hidden" name="action" value="register">
                <input type="text" name="username" placeholder="Username" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <input type="text" name="phone_no" placeholder="Phone Number (optional)">
                <select name="gender">
                    <option value="" disabled selected>Select Gender (optional)</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
                <textarea name="bio" placeholder="Write a short bio (optional)"></textarea>
                <button type="submit">Create Account</button>
            </form>
            <p class="toggle-link">Already have an account? <span onclick="toggleForms()">Login</span></p>
        </div>
    </div>

    <script>
        function toggleForms() {
            document.getElementById("login-form").classList.toggle("hidden");
            document.getElementById("register-form").classList.toggle("hidden");
        }

        // Check if the server passed a flag to show the register form
        const showRegister = {{ 'true' if show_register else 'false' }};
        if (showRegister) {
            toggleForms();
        }
    </script>
</body>
</html>